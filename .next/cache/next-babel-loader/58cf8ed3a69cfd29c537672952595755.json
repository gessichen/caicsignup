{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Head from \"next/head\";\nimport React from \"react\";\nimport axios from \"axios\";\nlet sharedTranslatorInstance = null;\n\nclass Translator {\n  constructor() {\n    _defineProperty(this, \"_package\", null);\n\n    _defineProperty(this, \"_ko\", null);\n\n    _defineProperty(this, \"_jp\", null);\n\n    _defineProperty(this, \"_zh\", null);\n\n    _defineProperty(this, \"_en\", null);\n\n    this.ko = {\n      \"country\": \"국가\",\n      \"cellphone\": \"휴대 전화\",\n      \"sendcode\": \"인증 코드를 보내\",\n      \"sendcodeok\": \"인증 코드를 성공적으로 전송\",\n      \"userinfo\": \"기본정보\",\n      \"verificationcode\": \"확인 코드\",\n      \"username\": \"아이디\",\n      \"password\": \"비밀번호\",\n      \"invitationcode\": \"초대코드\",\n      \"register\": \"회원가입\",\n      \"signUpSuccessfully\": \"성공적으로 가입\",\n      \"downloadWallet\": \"CAIC 지갑을 다운로드하려면 클릭하십시오\",\n      \"phoneformatwrong\": \"전화 번호 형식이 잘못되었습니다\",\n      \"passwordatleast8\": \"비밀번호 길이는 6 이상이어야합니다\",\n      \"cannotregister\": \"지금 등록 할 수 없습니다\",\n      \"phoneexist\": \"전화 번호가 이미 존재합니다\"\n    };\n    this.en = {\n      \"country\": \"Country\",\n      \"cellphone\": \"Cell Phone\",\n      \"sendcode\": \"Send Verification Code\",\n      \"sendcodeok\": \"\",\n      \"userinfo\": \"User information\",\n      \"verificationcode\": \"Verification Code\",\n      \"username\": \"User Name\",\n      \"password\": \"Password\",\n      \"invitationcode\": \"Invitation Code\",\n      \"register\": \"Register\",\n      \"signUpSuccessfully\": \"Sign Up Successfully\",\n      \"downloadWallet\": \"Click here to download latest CAIC wallet\",\n      \"phoneformatwrong\": \"Phone number format is wrong!\",\n      \"passwordatleast8\": \"Password length should be at leaset 6\",\n      \"cannotregister\": \"Cannot register for now!\",\n      \"phoneexist\": \"Phone number already exsited!\"\n    };\n    this.zh = {\n      \"country\": \"国家\",\n      \"cellphone\": \"电话号码\",\n      \"sendcode\": \"发送验证码\",\n      \"sendcodeok\": \"\",\n      \"userinfo\": \"用户信息\",\n      \"verificationcode\": \"手机验证码\",\n      \"username\": \"用户名\",\n      \"password\": \"密码\",\n      \"invitationcode\": \"邀请码\",\n      \"register\": \"注册\",\n      \"signUpSuccessfully\": \"注册成功\",\n      \"downloadWallet\": \"点击下载最新版本CAIC钱包\",\n      \"phoneformatwrong\": \"手机格式有误！\",\n      \"passwordatleast8\": \"密码长度至少为6位\",\n      \"cannotregister\": \"无法处理注册请求！\",\n      \"phoneexist\": \"该手机号已经注册过！\"\n    };\n    this.jp = {\n      \"country\": \"国\",\n      \"cellphone\": \"電話番号\",\n      \"sendcode\": \"確認コードを送信\",\n      \"sendcodeok\": \"確認コードを正常に送信します\",\n      \"userinfo\": \"基本情報\",\n      \"verificationcode\": \"電話確認コード\",\n      \"username\": \"ユーザ名\",\n      \"password\": \"パスワード\",\n      \"invitationcode\": \"招待コード\",\n      \"register\": \"新規登録\",\n      \"signUpSuccessfully\": \"正常に登録する\",\n      \"downloadWallet\": \"クリックしてCAICウォレットをダウンロード\",\n      \"phoneformatwrong\": \"電話の形式が間違っています！\",\n      \"passwordatleast8\": \"最小文字数は6です。もう一度入力してください\",\n      \"cannotregister\": \"サインアップできません！\",\n      \"phoneexist\": \"電話番号はすでに存在しています！\"\n    };\n    this._package = this.en;\n  }\n\n  static sharedTranslator() {\n    if (sharedTranslatorInstance === null) {\n      sharedTranslatorInstance = new Translator();\n    }\n\n    return sharedTranslatorInstance;\n  }\n\n  setPackage(lang) {\n    if (lang === \"ko\") {\n      this._package = this.ko;\n    } else if (lang === \"jp\") {\n      this._package = this.jp;\n    } else if (lang === \"zh\") {\n      this._package = this.zh;\n    } else {\n      this._package = this.en;\n    }\n  }\n\n  getT(oStr) {\n    if (this._package.hasOwnProperty(oStr)) {\n      return this._package[oStr];\n    } else {\n      return oStr;\n    }\n  }\n\n}\n\nconst TextInput = ({\n  type,\n  name,\n  label,\n  onChange,\n  placeholder,\n  value,\n  error\n}) => {\n  let wrapperClass = 'form-group';\n\n  if (error && error.length > 0) {\n    wrapperClass += \" \" + 'has-error';\n  }\n\n  return __jsx(\"div\", {\n    className: wrapperClass\n  }, __jsx(\"label\", {\n    htmlFor: name\n  }, label), __jsx(\"div\", {\n    className: \"field\"\n  }, __jsx(\"input\", {\n    type: type,\n    name: name,\n    className: \"form-control input-lg\",\n    placeholder: placeholder,\n    value: value,\n    onChange: onChange\n  }), error && __jsx(\"div\", {\n    className: \"alert alert-danger\"\n  }, error)));\n};\n\nclass UserInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      verification_code: \"\",\n      invitation_code: \"\",\n      password: \"\",\n      user_name: \"\",\n      mobile: \"\",\n      preMobile: \"\",\n      country: \"en\"\n    };\n    this.onChange = this.onChange.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n    this.formIsValid = this.formIsValid.bind(this);\n  }\n\n  componentDidMount() {\n    let urlPath = window.location.search; //alert(urlPath);\n\n    let components = urlPath.split(\"&\");\n\n    if (components.length !== 4) {\n      window.location.href = \"/\";\n    } else {\n      let invitation = components[0].split(\"=\")[1];\n      let preMobile = components[1].split(\"=\")[1];\n      let mobile = components[2].split(\"=\")[1];\n      let country = components[3].split(\"=\")[1];\n      Translator.sharedTranslator().setPackage(country);\n      this.setState({\n        invitation_code: invitation,\n        mobile: mobile,\n        preMobile: preMobile,\n        country: country\n      });\n    }\n  }\n\n  onChange(e) {\n    return this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  formIsValid() {\n    let isValid = true;\n\n    if (this.state.password.length < 8) {\n      alert(Translator.sharedTranslator().getT(\"passwordatleast8\"));\n      return false;\n    }\n\n    if (this.state.user_name.trim().length === 0) {\n      alert(Translator.sharedTranslator().getT(\"cannotregister\"));\n      return false;\n    }\n\n    if (this.state.invitation_code.trim().length === 0) {\n      alert(Translator.sharedTranslator().getT(\"cannotregister\"));\n      return false;\n    }\n\n    if (this.state.verification_code.trim().length === 0) {\n      alert(Translator.sharedTranslator().getT(\"cannotregister\"));\n      return false;\n    }\n\n    return isValid;\n  }\n\n  submitForm(e) {\n    e.preventDefault();\n\n    if (this.formIsValid()) {\n      axios.post(\"http://cicoins.io:8999/api/app/user/register\", {\n        \"preMobile\": this.state.preMobile,\n        \"mobile\": this.state.mobile,\n        \"userName\": this.state.user_name,\n        \"password\": this.state.password,\n        \"code\": this.state.verification_code,\n        \"inviteCode\": this.state.invitation_code\n      }).then(res => {\n        let data = res.data;\n\n        if (data.code === 0) {\n          window.location = \"/finish?lang=\" + this.state.country;\n        } else {\n          alert(Translator.sharedTranslator().getT(\"cannotregister\"));\n        }\n      });\n    }\n  }\n\n  render() {\n    return __jsx(\"div\", null, __jsx(\"div\", {\n      className: \"Register\"\n    }, __jsx(\"h2\", null, \"CAIC\"), __jsx(\"h4\", null, Translator.sharedTranslator().getT(\"userinfo\")), __jsx(\"form\", {\n      onSubmit: this.submitForm\n    }, __jsx(TextInput, {\n      type: \"text\",\n      label: Translator.sharedTranslator().getT(\"verificationcode\"),\n      name: \"verification_code\",\n      value: this.state.verification_code,\n      placeholder: Translator.sharedTranslator().getT(\"verificationcode\"),\n      onChange: this.onChange,\n      errors: null\n    }), __jsx(TextInput, {\n      type: \"text\",\n      label: Translator.sharedTranslator().getT(\"username\"),\n      name: \"user_name\",\n      value: this.state.user_name,\n      placeholder: Translator.sharedTranslator().getT(\"username\"),\n      onChange: this.onChange,\n      errors: null\n    }), __jsx(TextInput, {\n      type: \"password\",\n      label: Translator.sharedTranslator().getT(\"password\"),\n      name: \"password\",\n      value: this.state.password,\n      placeholder: Translator.sharedTranslator().getT(\"password\"),\n      onChange: this.onChange,\n      errors: null\n    }), __jsx(TextInput, {\n      type: \"text\",\n      label: Translator.sharedTranslator().getT(\"invitationcode\"),\n      name: \"invitation_code\",\n      value: this.state.invitation_code,\n      placeholder: Translator.sharedTranslator().getT(\"invitationcode\"),\n      onChange: this.onChange,\n      errors: null\n    }), __jsx(\"input\", {\n      type: \"submit\",\n      value: Translator.sharedTranslator().getT(\"register\"),\n      className: \"btn btn-primary btn-lg\"\n    }))));\n  }\n\n}\n\n;\nexport default class Signup extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return __jsx(\"div\", null, __jsx(Head, null, __jsx(\"title\", null, \"CAIC\"), __jsx(\"link\", {\n      href: \"https://caicsignup.s3-ap-northeast-1.amazonaws.com/main.css\",\n      rel: \"stylesheet\"\n    }), __jsx(\"link\", {\n      href: \"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css\",\n      rel: \"stylesheet\"\n    })), __jsx(UserInfo, null));\n  }\n\n}\n;","map":null,"metadata":{},"sourceType":"module"}